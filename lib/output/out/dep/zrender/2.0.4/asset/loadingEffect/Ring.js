/*! @2014 Leo Wang. All Rights Reserved */
define("zrender/loadingEffect/Ring",["require","./Base","../tool/util","../tool/color","../shape/Ring","../shape/Sector"],function(require){function e(e){t.call(this,e)}var t=require("./Base"),n=require("../tool/util"),i=require("../tool/color"),a=require("../shape/Ring"),r=require("../shape/Sector");return n.inherits(e,t),e.prototype._start=function(e,t){var o=n.merge(this.options,{textStyle:{color:"#07a"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{x:this.canvasWidth/2,y:this.canvasHeight/2,r0:60,r:100,color:"#bbdcff",brushType:"fill",textPosition:"inside",textFont:"normal 30px verdana",textColor:"rgba(30, 144, 255, 0.6)",timeInterval:100}}),s=o.effect,l=o.textStyle;if(null==l.x)l.x=s.x;if(null==l.y)l.y=s.y+(s.r0+s.r)/2-5;for(var h=this.createTextShape(o.textStyle),d=this.createBackgroundShape(o.backgroundColor),m=s.x,u=s.y,c=s.r0+6,p=s.r-6,f=s.color,V=i.lift(f,.1),U=new a({highlightStyle:n.clone(s)}),y=[],g=i.getGradientColors(["#ff6400","#ffe100","#97ff00"],25),_=15,b=240,k=0;16>k;k++)y.push(new r({highlightStyle:{x:m,y:u,r0:c,r:p,startAngle:b-_,endAngle:b,brushType:"fill",color:V},_color:i.getLinearGradient(m+c*Math.cos(b,!0),u-c*Math.sin(b,!0),m+c*Math.cos(b-_,!0),u-c*Math.sin(b-_,!0),[[0,g[2*k]],[1,g[2*k+1]]])})),b-=_;b=360;for(var k=0;4>k;k++)y.push(new r({highlightStyle:{x:m,y:u,r0:c,r:p,startAngle:b-_,endAngle:b,brushType:"fill",color:V},_color:i.getLinearGradient(m+c*Math.cos(b,!0),u-c*Math.sin(b,!0),m+c*Math.cos(b-_,!0),u-c*Math.sin(b-_,!0),[[0,g[2*k+32]],[1,g[2*k+33]]])})),b-=_;var x=0;if(null!=o.progress){e(d),x=100*this.adjust(o.progress,[0,1]).toFixed(2)/5,U.highlightStyle.text=5*x+"%",e(U);for(var k=0;20>k;k++)y[k].highlightStyle.color=x>k?y[k]._color:V,e(y[k]);return e(h),void t()}return setInterval(function(){e(d),x+=x>=20?-20:1,e(U);for(var n=0;20>n;n++)y[n].highlightStyle.color=x>n?y[n]._color:V,e(y[n]);e(h),t()},s.timeInterval)},e});