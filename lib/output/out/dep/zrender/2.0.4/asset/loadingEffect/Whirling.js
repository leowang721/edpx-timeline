/*! @2014 Leo Wang. All Rights Reserved */
define("zrender/loadingEffect/Whirling",["require","./Base","../tool/util","../tool/area","../shape/Ring","../shape/Droplet","../shape/Circle"],function(require){function e(e){t.call(this,e)}var t=require("./Base"),n=require("../tool/util"),i=require("../tool/area"),a=require("../shape/Ring"),r=require("../shape/Droplet"),o=require("../shape/Circle");return n.inherits(e,t),e.prototype._start=function(e,t){var s=n.merge(this.options,{textStyle:{color:"#888",textAlign:"start"},backgroundColor:"rgba(250, 250, 250, 0.8)"}),l=this.createTextShape(s.textStyle),h=10,d=i.getTextWidth(l.highlightStyle.text,l.highlightStyle.textFont),m=i.getTextHeight(l.highlightStyle.text,l.highlightStyle.textFont),u=n.merge(this.options.effect||{},{r:18,colorIn:"#fff",colorOut:"#555",colorWhirl:"#6cf",timeInterval:50}),c=this.getLocation(this.options.textStyle,d+h+2*u.r,Math.max(2*u.r,m));u.x=c.x+u.r,u.y=l.highlightStyle.y=c.y+c.height/2,l.highlightStyle.x=u.x+u.r+h;var p=this.createBackgroundShape(s.backgroundColor),f=new r({highlightStyle:{a:Math.round(u.r/2),b:Math.round(u.r-u.r/6),brushType:"fill",color:u.colorWhirl}}),V=new o({highlightStyle:{r:Math.round(u.r/6),brushType:"fill",color:u.colorIn}}),U=new a({highlightStyle:{r0:Math.round(u.r-u.r/3),r:u.r,brushType:"fill",color:u.colorOut}}),y=[0,u.x,u.y];return f.highlightStyle.x=V.highlightStyle.x=U.highlightStyle.x=y[1],f.highlightStyle.y=V.highlightStyle.y=U.highlightStyle.y=y[2],setInterval(function(){e(p),e(U),y[0]-=.3,f.rotation=y,e(f),e(V),e(l),t()},u.timeInterval)},e});