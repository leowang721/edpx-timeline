/*! @2014 Leo Wang. All Rights Reserved */
define("zrender/shape/Polygon",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","../tool/util"],function(require){var e=require("./Base"),t=require("./util/smoothSpline"),i=require("./util/smoothBezier"),n=require("./util/dashedLineTo"),a=function(t){e.call(this,t)};return a.prototype={type:"polygon",brush:function(e,t){var i=this.style;if(t)i=this.getHighlightStyle(i,this.highlightStyle||{});e.save(),this.setContext(e,i),this.setTransform(e);var n=!1;if("fill"==i.brushType||"both"==i.brushType||"undefined"==typeof i.brushType){if(e.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType)this.buildPath(e,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}),n=!1;else this.buildPath(e,i),n=!0;e.closePath(),e.fill()}if(i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)){if(!n)e.beginPath(),this.buildPath(e,i);e.stroke()}this.drawText(e,i,this.style),e.restore()},buildPath:function(e,a){var r=a.pointList;if(!(r.length<2))if(a.smooth&&"spline"!==a.smooth){var o=i(r,a.smooth,!0,a.smoothConstraint);e.moveTo(r[0][0],r[0][1]);for(var s,l,h,d=r.length,m=0;d>m;m++)s=o[2*m],l=o[2*m+1],h=r[(m+1)%d],e.bezierCurveTo(s[0],s[1],l[0],l[1],h[0],h[1])}else{if("spline"===a.smooth)r=t(r,!0);if(!a.lineType||"solid"==a.lineType){e.moveTo(r[0][0],r[0][1]);for(var m=1,u=r.length;u>m;m++)e.lineTo(r[m][0],r[m][1]);e.lineTo(r[0][0],r[0][1])}else if("dashed"==a.lineType||"dotted"==a.lineType){var c=a._dashLength||(a.lineWidth||1)*("dashed"==a.lineType?5:1);a._dashLength=c,e.moveTo(r[0][0],r[0][1]);for(var m=1,u=r.length;u>m;m++)n(e,r[m-1][0],r[m-1][1],r[m][0],r[m][1],c);n(e,r[r.length-1][0],r[r.length-1][1],r[0][0],r[0][1],c)}}},getRect:function(e){if(e.__rect)return e.__rect;for(var t=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,a=Number.MIN_VALUE,r=e.pointList,o=0,s=r.length;s>o;o++){if(r[o][0]<t)t=r[o][0];if(r[o][0]>i)i=r[o][0];if(r[o][1]<n)n=r[o][1];if(r[o][1]>a)a=r[o][1]}var l;if("stroke"==e.brushType||"fill"==e.brushType)l=e.lineWidth||1;else l=0;return e.__rect={x:Math.round(t-l/2),y:Math.round(n-l/2),width:i-t+l,height:a-n+l},e.__rect}},require("../tool/util").inherits(a,e),a});