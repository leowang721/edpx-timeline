/*! @2014 Leo Wang. All Rights Reserved */
define("zrender/Group",["require","./tool/guid","./tool/util","./mixin/Transformable","./mixin/Eventful"],function(require){var e=require("./tool/guid"),t=require("./tool/util"),n=require("./mixin/Transformable"),i=require("./mixin/Eventful"),a=function(t){t=t||{},this.id=t.id||e();for(var a in t)this[a]=t[a];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,n.call(this),i.call(this)};return a.prototype.ignore=!1,a.prototype.children=function(){return this._children.slice()},a.prototype.childAt=function(e){return this._children[e]},a.prototype.addChild=function(e){if(e!=this)if(e.parent!=this){if(e.parent)e.parent.removeChild(e);if(this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage)if(this._storage.addToMap(e),e instanceof a)e.addChildrenToStorage(this._storage)}},a.prototype.removeChild=function(e){var n=t.indexOf(this._children,e);if(this._children.splice(n,1),e.parent=null,e._storage)if(this._storage.delFromMap(e.id),e instanceof a)e.delChildrenFromStorage(e._storage)},a.prototype.eachChild=function(e,t){for(var n=!!t,i=0;i<this._children.length;i++){var a=this._children[i];if(n)e.call(t,a);else e(a)}},a.prototype.traverse=function(e,t){for(var n=!!t,i=0;i<this._children.length;i++){var a=this._children[i];if(n)e.call(t,a);else e(a);if("group"===a.type)a.traverse(e,t)}},a.prototype.addChildrenToStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];if(e.addToMap(n),"group"===n.type)n.addChildrenToStorage(e)}},a.prototype.delChildrenFromStorage=function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];if(e.delFromMap(n.id),"group"===n.type)n.delChildrenFromStorage(e)}},a.prototype.modSelf=function(){this.__dirty=!0},t.merge(a.prototype,n.prototype,!0),t.merge(a.prototype,i.prototype,!0),a});