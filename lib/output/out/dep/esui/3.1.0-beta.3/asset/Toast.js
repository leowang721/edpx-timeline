/*! @2014 Leo Wang. All Rights Reserved */
define("esui/Toast",["require","./lib","./Control","./painters","./main"],function(require){function e(){n.apply(this,arguments)}function t(){var e=require("./main").getConfig("uiClassPrefix"),t=e+"-toast-collection-area",i=document.getElementById(t);if(!i)i=document.createElement("div"),i.id=t,this.helper.addPartClasses("collection-area",i),document.body.appendChild(i);return i}var i=require("./lib"),n=require("./Control");e.defaultProperties={duration:3e3,messageType:"normal",disposeOnHide:!0},e.prototype.type="Toast",e.prototype.initOptions=function(t){var n={};if(i.extend(n,e.defaultProperties,t),null==n.content)n.content=this.main.innerHTML;this.setProperties(n)},e.prototype.initStructure=function(){this.main.innerHTML=this.helper.getPartHTML("content","p")},e.prototype.repaint=require("./painters").createRepaint(n.prototype.repaint,{name:"content",paint:function(e,t){var i=e.main.firstChild;i.innerHTML=t}},{name:"messageType",paint:function(e){e.helper.addPartClasses(e.messageType)}}),e.prototype.show=function(){if(!this.helper.isInStage("DISPOSED")){if(!this.main.parentElement&&!this.main.parentNode)this.appendTo(t.call(this));if(n.prototype.show.apply(this,arguments),this.fire("show"),clearTimeout(this.timer),!isNaN(this.duration)&&1/0!==this.duration)this.timer=setTimeout(i.bind(this.hide,this),this.duration)}},e.prototype.hide=function(){if(n.prototype.hide.apply(this,arguments),clearTimeout(this.timer),this.fire("hide"),this.disposeOnHide)this.dispose()},e.prototype.dispose=function(){if(clearTimeout(this.timer),!this.helper.isInStage("DISPOSED"))i.removeNode(this.main),n.prototype.dispose.apply(this,arguments)};var a=["show","info","alert","error","success"];for(var o in a)if(a.hasOwnProperty(o))!function(a){e[a]=function(o,r){if("show"===a)a="normal";r=i.extend({content:o},r),r.messageType=r.messageType||a;var s=new e(r);return n.prototype.hide.apply(s),s.appendTo(t.call(s)),s}}(a[o]);return i.inherits(e,n),require("./main").register(e),e});