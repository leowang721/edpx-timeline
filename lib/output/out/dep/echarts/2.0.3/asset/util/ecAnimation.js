/*! @2014 Leo Wang. All Rights Reserved */
define("echarts/util/ecAnimation",["require","zrender/tool/util","zrender/shape/Polygon"],function(require){function t(t,e,i,s,o){var a,n=i.style.pointList,r=n.length;if(!e){if(a=[],"vertical"!=i._orient)for(var h=n[0][1],l=0;r>l;l++)a[l]=[n[l][0],h];else for(var d=n[0][0],l=0;r>l;l++)a[l]=[d,n[l][1]];if("half-smooth-polygon"==i.type)a[r-1]=f.clone(n[r-1]),a[r-2]=f.clone(n[r-2]);e={style:{pointList:a}}}a=e.style.pointList;var p=a.length;if(p==r)i.style.pointList=a;else if(r>p)i.style.pointList=a.concat(n.slice(p));else i.style.pointList=a.slice(0,r);t.addShape(i),t.animate(i.id,"style").when(s,{pointList:n}).start(o)}function e(t,e){for(var i=arguments.length,s=2;i>s;s++){var o=arguments[s];t.style[o]=e.style[o]}}function i(t,i,s,o,a){var n=s.style;if(!i)i={style:{x:n.x,y:"vertical"==s._orient?n.y+n.height:n.y,width:"vertical"==s._orient?n.width:0,height:"vertical"!=s._orient?n.height:0}};var r=n.x,h=n.y,l=n.width,d=n.height;e(s,i,"x","y","width","height"),t.addShape(s),t.animate(s.id,"style").when(o,{x:r,y:h,width:l,height:d}).start(a)}function s(t,e,i,s,o){if(!e){var a=i.style.y;e={style:{y:[a[0],a[0],a[0],a[0]]}}}var n=i.style.y;i.style.y=e.style.y,t.addShape(i),t.animate(i.id,"style").when(s,{y:n}).start(o)}function o(t,e,i,s,o){var a=i.style.x,n=i.style.y,r=i.style.r0,h=i.style.r;if("r"!=i._animationAdd)i.style.r0=0,i.style.r=0,i.rotation=[2*Math.PI,a,n],t.addShape(i),t.animate(i.id,"style").when(s,{r0:r,r:h}).start(o),t.animate(i.id,"").when(Math.round(s/3*2),{rotation:[0,a,n]}).start(o);else i.style.r0=i.style.r,t.addShape(i),t.animate(i.id,"style").when(s,{r0:r}).start(o)}function a(t,i,s,o,a){if(!i)if("r"!=s._animationAdd)i={style:{startAngle:s.style.startAngle,endAngle:s.style.startAngle}};else i={style:{r0:s.style.r}};var n=s.style.startAngle,r=s.style.endAngle;e(s,i,"startAngle","endAngle"),t.addShape(s),t.animate(s.id,"style").when(o,{startAngle:n,endAngle:r}).start(a)}function n(t,i,s,o,a){if(!i)i={style:{x:"left"==s.style.textAlign?s.style.x+100:s.style.x-100,y:s.style.y}};var n=s.style.x,r=s.style.y;e(s,i,"x","y"),t.addShape(s),t.animate(s.id,"style").when(o,{x:n,y:r}).start(a)}function r(t,e,i,s,o){var a=require("zrender/shape/Polygon").prototype.getRect(i.style),n=a.x+a.width/2,r=a.y+a.height/2;i.scale=[.1,.1,n,r],t.addShape(i),t.animate(i.id,"").when(s,{scale:[1,1,n,r]}).start(o)}function h(t,i,s,o,a){if(!i)i={style:{source0:0,source1:360,target0:0,target1:360}};var n=s.style.source0,r=s.style.source1,h=s.style.target0,l=s.style.target1;if(i.style)e(s,i,"source0","source1","target0","target1");t.addShape(s),t.animate(s.id,"style").when(o,{source0:n,source1:r,target0:h,target1:l}).start(a)}function l(t,e,i,s,o){if(!e)e={style:{angle:i.style.startAngle}};var a=i.style.angle;i.style.angle=e.style.angle,t.addShape(i),t.animate(i.id,"style").when(s,{angle:a}).start(o)}function d(t,e,s,o,a){if(s.style._x=s.style.x,s.style._y=s.style.y,s.style._width=s.style.width,s.style._height=s.style.height,!e){var n=s._x||0,r=s._y||0;s.scale=[0,0,n,r],t.addShape(s),t.animate(s.id,"").when(o,{scale:[1,1,n,r]}).start(a||"QuinticOut")}else i(t,e,s,o,a)}function p(t,i,s,o,a){if(!i)i={style:{xEnd:s.style.xStart,yEnd:s.style.yStart}};var n=s.style.xStart,r=s.style.xEnd,h=s.style.yStart,l=s.style.yEnd;e(s,i,"xStart","xEnd","yStart","yEnd"),t.addShape(s),t.animate(s.id,"style").when(o,{xStart:n,xEnd:r,yStart:h,yEnd:l}).start(a)}function c(t,e,i,s,o){if(!i.style.smooth)i.style.pointList=!e?[[i.style.xStart,i.style.yStart],[i.style.xStart,i.style.yStart]]:e.style.pointList,t.addShape(i),t.animate(i.id,"style").when(s,{pointList:[[i.style.xStart,i.style.yStart],[i._x||0,i._y||0]]}).start(o||"QuinticOut");else i.style.pointListLength=1,t.addShape(i),i.style.pointList=i.style.pointList||i.getPointList(i.style),t.animate(i.id,"style").when(s,{pointListLength:i.style.pointList.length}).start(o||"QuinticOut")}var f=require("zrender/tool/util");return{pointList:t,rectangle:i,candle:s,ring:o,sector:a,text:n,polygon:r,chord:h,gaugePointer:l,icon:d,line:p,markline:c}});