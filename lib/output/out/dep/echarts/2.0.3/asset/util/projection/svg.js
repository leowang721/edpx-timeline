/*! @2014 Leo Wang. All Rights Reserved */
define("echarts/util/projection/svg",["require","zrender/shape/Path"],function(require){function e(e){return parseFloat(e||0)}function t(t){for(var n=t.firstChild;"svg"!=n.nodeName.toLowerCase()||1!=n.nodeType;)n=n.nextSibling;var i=e(n.getAttribute("x")),a=e(n.getAttribute("y")),o=e(n.getAttribute("width")),s=e(n.getAttribute("height"));return{left:i,top:a,width:o,height:s}}function n(e,t){function n(e){var t=e.tagName;if(V[t]){var o=V[t](e,i);if(o)o.scale=i,o.properties={name:e.getAttribute("name")||""},o.id=e.id,s(o,e),a.push(o)}for(var l=e.childNodes,r=0,U=l.length;U>r;r++)n(l[r])}var i=[t.scale.x,t.scale.y],a=[];return n(e),a}function i(e,t){var n=t instanceof Array?[1*t[0],1*t[1]]:[1*t.x,1*t.y];return[n[0]/e.scale.x,n[1]/e.scale.y]}function a(e,t){var n=t instanceof Array?[1*t[0],1*t[1]]:[1*t.x,1*t.y];return[n[0]*e.scale.x,n[1]*e.scale.y]}function o(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function s(e,t){var n=t.getAttribute("fill"),i=t.getAttribute("stroke"),a=t.getAttribute("stroke-width"),o=t.getAttribute("opacity");if(n&&"none"!=n)if(e.color=n,i)e.brushType="both",e.strokeColor=i;else e.brushType="fill";else if(i&&"none"!=i)e.strokeColor=i,e.brushType="stroke";if(a&&"none"!=a)e.lineWidth=parseFloat(a);if(o&&"none"!=o)e.opacity=parseFloat(o)}function l(e){for(var t=o(e).replace(/,/g," ").split(/\s+/),n=[],i=0;i<t.length;){var a=parseFloat(t[i++]),s=parseFloat(t[i++]);n.push([a,s])}return n}var r=require("zrender/shape/Path"),V={path:function(e,t){var n=e.getAttribute("d"),i=r.prototype.getRect({path:n});return{shapeType:"path",path:n,cp:[(i.x+i.width/2)*t[0],(i.y+i.height/2)*t[1]]}},rect:function(t,n){var i=e(t.getAttribute("x")),a=e(t.getAttribute("y")),o=e(t.getAttribute("width")),s=e(t.getAttribute("height"));return{shapeType:"rectangle",x:i,y:a,width:o,height:s,cp:[(i+o/2)*n[0],(a+s/2)*n[1]]}},line:function(t,n){var i=e(t.getAttribute("x1")),a=e(t.getAttribute("y1")),o=e(t.getAttribute("x2")),s=e(t.getAttribute("y2"));return{shapeType:"line",xStart:i,yStart:a,xEnd:o,yEnd:s,cp:[.5*(i+o)*n[0],.5*(a+s)*n[1]]}},circle:function(t,n){var i=e(t.getAttribute("cx")),a=e(t.getAttribute("cy")),o=e(t.getAttribute("r"));return{shapeType:"circle",x:i,y:a,r:o,cp:[i*n[0],a*n[1]]}},ellipse:function(e,t){var n=parseFloat(e.getAttribute("cx")||0),i=parseFloat(e.getAttribute("cy")||0),a=parseFloat(e.getAttribute("rx")||0),o=parseFloat(e.getAttribute("ry")||0);return{shapeType:"ellipse",x:n,y:i,a:a,b:o,cp:[n*t[0],i*t[1]]}},polygon:function(e,t){var n=e.getAttribute("points"),i=[1/0,1/0],a=[-1/0,-1/0];if(n){n=l(n);for(var o=0;o<n.length;o++){var s=n[o];i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),a[0]=Math.max(s[0],a[0]),a[1]=Math.max(s[1],a[1])}return{shapeType:"polygon",pointList:n,cp:[(i[0]+a[0])/2*t[0],(i[1]+a[1])/2*t[0]]}}},polyline:function(e,t){var n=V.polygon(e,t);return n}};return{getBbox:t,geoJson2Path:n,pos2geo:i,geo2pos:a}});