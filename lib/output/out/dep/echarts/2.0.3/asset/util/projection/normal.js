/*! @2014 Leo Wang. All Rights Reserved */
define("echarts/util/projection/normal",[],function(){function e(e,n){if(n=n||{},!e.srcSize)t(e,n);return e.srcSize}function t(e,t){t=t||{},s.xmin=360,s.xmax=-360,s.ymin=180,s.ymax=-180;for(var n,i,a=e.features,o=0,l=a.length;l>o;o++)if(i=a[o],!i.properties.name||!t[i.properties.name])switch(i.type){case"Feature":s[i.geometry.type](i.geometry.coordinates);break;case"GeometryCollection":n=i.geometries;for(var r=0,V=n.length;V>r;r++)s[n[r].type](n[r].coordinates)}else;return e.srcSize={left:1*s.xmin.toFixed(4),top:1*s.ymin.toFixed(4),width:1*(s.xmax-s.xmin).toFixed(4),height:1*(s.ymax-s.ymin).toFixed(4)},e}function n(e,n,i){function a(e,t){c=e.type,y=e.coordinates,o._bbox={xmin:360,xmax:-360,ymin:180,ymax:-180},b=o[c](y),U.push({path:b,cp:t.properties.cp?o.makePoint(t.properties.cp):o.makePoint([(o._bbox.xmin+o._bbox.xmax)/2,(o._bbox.ymin+o._bbox.ymax)/2]),properties:t.properties,id:t.id})}if(i=i||{},o.scale=null,o.offset=null,!e.srcSize)t(e,i);n.offset={x:e.srcSize.left,y:e.srcSize.top,left:n.OffsetLeft||0,top:n.OffsetTop||0},o.scale=n.scale,o.offset=n.offset;for(var s,l,r,V=e.features,U=[],h=0,m=V.length;m>h;h++)if(r=V[h],!r.properties.name||!i[r.properties.name]){if("Feature"==r.type)a(r.geometry,r);else if("GeometryCollection"==r.type){s=r.geometries;for(var p=0,d=s.length;d>p;p++)l=s[p],a(l,l)}}else;var c,y,b;return U}function i(e,t){var n,i;if(t instanceof Array)n=1*t[0],i=1*t[1];else n=1*t.x,i=1*t.y;return n=n/e.scale.x+e.offset.x-168.5,n=n>180?n-360:n,i=90-(i/e.scale.y+e.offset.y),[n,i]}function a(e,t){return o.offset=e.offset,o.scale=e.scale,t instanceof Array?o.makePoint([1*t[0],1*t[1]]):o.makePoint([1*t.x,1*t.y])}var o={formatPoint:function(e){return[(e[0]<-168.5&&e[1]>63.8?e[0]+360:e[0])+168.5,90-e[1]]},makePoint:function(e){var t=this,n=t.formatPoint(e);if(t._bbox.xmin>e[0])t._bbox.xmin=e[0];if(t._bbox.xmax<e[0])t._bbox.xmax=e[0];if(t._bbox.ymin>e[1])t._bbox.ymin=e[1];if(t._bbox.ymax<e[1])t._bbox.ymax=e[1];var i=(n[0]-o.offset.x)*o.scale.x+o.offset.left,a=(n[1]-o.offset.y)*o.scale.y+o.offset.top;return[i,a]},Point:function(e){return e=this.makePoint(e),e.join(",")},LineString:function(e){for(var t,n="",i=0,a=e.length;a>i;i++)if(t=o.makePoint(e[i]),0===i)n="M"+t.join(",");else n=n+"L"+t.join(",");return n},Polygon:function(e){for(var t="",n=0,i=e.length;i>n;n++)t=t+o.LineString(e[n])+"z";return t},MultiPoint:function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(o.Point(e[n]));return t},MultiLineString:function(e){for(var t="",n=0,i=e.length;i>n;n++)t+=o.LineString(e[n]);return t},MultiPolygon:function(e){for(var t="",n=0,i=e.length;i>n;n++)t+=o.Polygon(e[n]);return t}},s={formatPoint:o.formatPoint,makePoint:function(e){var t=this,n=t.formatPoint(e),i=n[0],a=n[1];if(t.xmin>i)t.xmin=i;if(t.xmax<i)t.xmax=i;if(t.ymin>a)t.ymin=a;if(t.ymax<a)t.ymax=a},Point:function(e){this.makePoint(e)},LineString:function(e){for(var t=0,n=e.length;n>t;t++)this.makePoint(e[t])},Polygon:function(e){for(var t=0,n=e.length;n>t;t++)this.LineString(e[t])},MultiPoint:function(e){for(var t=0,n=e.length;n>t;t++)this.Point(e[t])},MultiLineString:function(e){for(var t=0,n=e.length;n>t;t++)this.LineString(e[t])},MultiPolygon:function(e){for(var t=0,n=e.length;n>t;t++)this.Polygon(e[t])}};return{getBbox:e,geoJson2Path:n,pos2geo:i,geo2pos:a}});