/*! @2014 Leo Wang. All Rights Reserved */
define("er/View",["require","./util","./Model","etpl","eoo","mini-event/EventTarget"],function(require){var e=require("./util"),exports={};exports.constructor=function(){this.initialize()},exports.initialize=e.noop,exports.template="",exports.getTemplateName=function(){return this.template||""},exports.model=null,exports.container="",exports.getContainerElement=function(){return e.getElement(this.container)||null},exports.getTemplateData=function(){var e=this.model;if(e&&"function"!=typeof e.get){var t=require("./Model");e=new t(e)}var n=function(t){for(var n=t.replace(/\[(\d+)\]/g,".$1").split("."),i=n.shift(),a=e.get(i);a&&(i=n.shift());)a=a[i];return a};return{get:n,relatedModel:e}},exports.render=function(){var e=this.getContainerElement();if(!e){var t=this.model&&"function"==typeof this.model.get&&this.model.get("url");throw new Error("Container not found when rendering "+(t?'"'+t+'"':"view"))}var n=require("etpl"),i=n.render(this.getTemplateName(),this.getTemplateData());e.innerHTML=i,this.enterDocument()},exports.enterDocument=require("./util").noop,exports.dispose=function(){var e=this.getContainerElement();e&&(e.innerHTML="")};var t=require("eoo").create(require("mini-event/EventTarget"),exports);return t});